## WebToy - A simple toy web framework

Этот проект представляет собой простую фреймворк для HTTP/1.1 протокола на базе Java 21. Он предоставляет TCPServer на основе Selector, который позволяет обрабатывать одновременно несколько клиентских подключений. Данный фреймворк реализует все методы, поддерживаемые протоколом HTTP/1.1, и в случае ошибок возвращает соответствующие коды ошибок в соответствии со стандартом RFC 2616.

### Функциональность

- Поддержка протокола HTTP/1.1: фреймворк полностью соответствует спецификации протокола HTTP/1.1, включая методы запросов, коды состояния, заголовки запросов и ответов и т. д.
- Поддержка нескольких клиентов: благодаря TCPServer на основе Selector, фреймворк позволяет обрабатывать несколько клиентских подключений одновременно, что повышает возможности обработки параллельных запросов.
- Обработка ошибок: при возникновении ошибок фреймворк возвращает соответствующие коды ошибок в соответствии со стандартом RFC 2616, предоставляя надежный механизм обработки ошибок.
- Простота использования: для создания сервера достаточно привязать свой обработчик (Handler) к конечной точке (Endpoint) - и можно запустить сервер.

### Структура проекта

```
├── src/                     # Каталог исходного кода
│   └── main.java.webtoy/      # Код, относящийся к фреймворку
│       ├── App.java             # Пример простого использования
│       ├── Application.java     # Реализация приложения на фреймворке
│       ├── Server.java          # Реализация TCPServer на основе Selector
│       ├── HTTPMethod.java      # Перечисление всех поддерживаемых методов HTTP/1.1
│       ├── Request.java         # Реализация HTTP-запроса на основе байтового потока
│       ├── Response.java        # Реализация HTTP-ответа
│       ├── Router.java          # Реализация маршрутизации конечных точек (Endpoints)
│       └── Handler.java         # Определение интерфейса обработчика (Handler)
├── test/                    # Каталог тестового кода
│   └── main.java.webtoy/      # Тесты сервера
│       └── AppTest.java         # Модульные тесты
├── pom.xml                  # Файл конфигурации Maven-проекта
└── README.md                # Документация проекта
```

### Быстрый старт

Ниже приведен пример кода, демонстрирующий, как использовать этот фреймворк для создания простого HTTP-сервера:

```java
Application app = new Application();
Handler handler = (request) -> {
    if (request.method == HTTPMethod.GET)
        return new Response(request.args.toString());
    if (request.method == HTTPMethod.POST)
        return new Response(request.forms.toString());
    return new Response(404);  // Недостижимый код
};
app.route("/foo", List.of(HTTPMethod.GET, HTTPMethod.POST), handler);
try {
    Server server = new Server("localhost", 9009, app);
    Runtime.getRuntime().addShutdownHook(new Thread() {
        @Override
        public void run() {
            System.out.println("\nHave a nice day :)");
            server.close();
        }
    });
    server.start();
} catch (IOException error) {
    System.out.println("Error in TCP");
    return;
}
```

Этот код запускает HTTP-сервер и привязывает обработчик (Handler) к конечной точке (Endpoint) `/foo`. В этом примере обработчик возвращает строку, содержащую либо запросы GET, либо данные формы POST, в зависимости от метода запроса.

При завершении работы сервер отключает все установленные клиентские соединения и желает вам хорошего дня :)